#! /bin/bash
LOG_FILE=/var/log/arch3/coordinator.log
PID_FILE=/var/run/arch3_coordinator.pid

case "$1" in
  start)
      echo "Starting up Coordinator..."
      start-stop-daemon --start -b -m --pidfile $PID_FILE --exec /usr/bin/java -- -cp /home/ubuntu/arch3/pancancer.jar info.pancancer.arch3.coordinator.Coordinator --endless --config /etc/arch3/masterConfig.ini
    ;;
  stop)
     echo "Stopping Coordinator..."
     start-stop-daemon --stop --signal KILL --pidfile $PID_FILE --exec /usr/bin/java -- -cp /home/ubuntu/arch3/pancancer.jar info.pancancer.arch3.coordinator.Coordinator --endless --config /etc/arch3/masterConfig.ini
    ;;
  status)
    start-stop-daemon --status --pidfile /var/run/arch3_coordinator.pid
    echo $?
    ;;
  restart)
     echo "Restarting Coordinator..."
     start-stop-daemon --stop --signal KILL --pidfile $PID_FILE --exec /usr/bin/java -- -cp /home/ubuntu/arch3/pancancer.jar info.pancancer.arch3.coordinator.Coordinator --endless --config /etc/arch3/masterConfig.ini
     start-stop-daemon --start -b -m --pidfile $PID_FILE --exec /usr/bin/java -- -cp /home/ubuntu/arch3/pancancer.jar info.pancancer.arch3.coordinator.Coordinator --endless --config /etc/arch3/masterConfig.ini
    ;;
  *)
    echo $"Usage: $0 {start|stop|status|restart}"
    exit 1
    ;;
esac

# nohup java -cp /home/ubuntu/arch3/pancancer.jar info.pancancer.arch3.coordinator.Coordinator $@ &> $LOG_FILE
exit 0
